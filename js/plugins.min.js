//mkIsTouch
;(function(a,b){a.fn.mkIsTouch=function(){var a=/(opera mini)/,c=navigator.userAgent.toLowerCase();return"undefined"!=typeof b.ontouchstart||c.match(a)?!0:!1}})(jQuery,window,document);
//mkBLink
;(function(b){var d={interval:50,timeout:350,className:"blink"};b.fn.mkBlink=function(e){var c=b.extend({},d,e),a=this;b.each(c,function(c,b){if("function"===typeof b)a.one(c+".mkBlink",function(){return b(a)})});a.trigger("before.mkBlink");a.init=function(){var b=void 0,b=setInterval(function(){a.toggleClass(c.className)},c.interval);setTimeout(function(){clearInterval(b);a.hasClass(c.className)&&a.toggleClass(c.className);a.trigger("callback.mkBlink")},c.timeout)};a.init();return a}})(jQuery);
//mkEcho
(function(c){var e={startOpacity:1,fadeTime:500,timeout:3E3,message:"\u041e\u0448\u0438\u0431\u043a\u0430"},d;c.fn.mkEcho=function(f){var b=c.extend({},e,f),a=this;a.is(":visible")&&(a.hide(),clearTimeout(d));c.each(b,function(b,c){if("function"===typeof c)a.one(b+".mkEcho",function(){return c(a)})});a.trigger("before.mkEcho");a.init=function(){a.one("click",function(){a.hide();clearTimeout(d)});a.html(b.message).fadeTo(b.fadeTime,b.startOpacity);d=setTimeout(function(){a.fadeOut(b.fadeTime)},b.timeout);a.trigger("callback.mkEcho")};a.init();return a}})(jQuery);
//mkBubble
;(function(d){var h={fadeIn:0,fadeOut:1E3,timeout:0,distance:30,position:"center",startOpacity:0.6,bubbleId:"mkBubble",content:"Ok!"},e;d.fn.mkBubble=function(g,i){function j(){this.left=d(window).width()/2+d(window).scrollLeft();this.top=d(window).height()/2+d(window).scrollTop()}function k(){this.left=g.pageX;this.top=g.pageY}function l(){this.left=b.position[0];this.top=b.position[1]}var b=d.extend({},h,i),f=this,c,a=d("#mkBubble").length?d("#mkBubble"):d("body").append("<div id='"+b.bubbleId+"'>\u0422\u0435\u0441\u0442</div>").find("#mkBubble");a.is(":visible")&&(a.hide(),clearTimeout(e));a.init=function(){d.each(b,function(b,c){if("function"===typeof c)a.one(b+".mkBubble",function(){return c(a)})});a.html(b.content);a.trigger("before.mkBubble");a.one("click",function(){a.hide();clearTimeout(e)});"center"===b.position?(c=new j,a.stop().css({left:c.left-parseInt(a.outerWidth())/2+"px",top:c.top-parseInt(a.outerHeight())/2+"px",opacity:b.startOpacity})):"object"===b.position?(c=f.offset(),console.log(c),a.stop().css({left:c.left+parseInt(f.outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:c.top+parseInt(f.outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:b.startOpacity})):"cursor"===b.position?(c=new k,a.stop().css({left:c.left-parseInt(a.outerWidth())/2+"px",top:c.top-parseInt(a.outerHeight())/2+"px",opacity:b.startOpacity})):"[object Array]"===Object.prototype.toString.call(b.position)?(c=new l,a.stop().css({left:c.left-parseInt(a.outerWidth())/2+"px",top:c.top-parseInt(a.outerHeight())/2+"px",opacity:b.startOpacity})):(c=d(b.position).offset(),a.stop().css({left:c.left+parseInt(d(b.position).outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:c.top+parseInt(d(b.position).outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:b.startOpacity}));a.fadeIn(b.fadeIn);e=setTimeout(function(){a.animate({top:a.offset().top-b.distance+"px",opacity:"hide"},b.fadeOut,function(){a.remove();a.trigger("callback.mkBubble")})},b.timeout)};a.init();return a}})(jQuery);
//mkTitle
(function(c,f){function e(a,b){var d=this;d.element=a;d.config=c.extend({},g,b);d._defaults=g;d._name=h;c.each(d.config,function(a,b){if("function"===typeof b)d.element.one(a+".mkTitle",function(){return b(d.element)})});this.init()}var h="mkTitle",j,g={fadeIn:300,fadeOut:0,timeout:0,distance:20,position:"object",hideOn:"mouseLeave_clickParent",color:"white",shadow:!0,arrow:!0,startOpacity:1,titleClass:"mkTitle",contentClass:"mkTitle_content",direction:"up",content:"\u041d\u0430\u0436\u043c\u0438!",remove:!1};e.prototype.toPosition=function(a){function b(){this.left=c(f).width()/2+c(f).scrollLeft();this.top=c(f).height()/2+c(f).scrollTop()}function d(){this.left=i.config.position[0];this.top=i.config.position[1]}var i=this;if("center"===this.config.position)offset=new b,a.stop().css({left:offset.left-parseInt(a.outerWidth())/2+"px",top:offset.top-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity});else if("object"===this.config.position)switch(offset=this.element.position(),this.config.direction){case "up":a.stop().css({left:offset.left+parseInt(this.element.outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:offset.top-parseInt(a.outerHeight())-this.config.distance+"px",opacity:this.config.startOpacity});break;case "down":a.stop().css({left:offset.left+parseInt(this.element.outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:offset.top+parseInt(this.element.outerHeight())+this.config.distance+"px",opacity:this.config.startOpacity});break;case "left":a.stop().css({left:offset.left-parseInt(a.outerWidth())-this.config.distance+"px",top:offset.top+parseInt(this.element.outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity});break;case "right":a.stop().css({left:offset.left+parseInt(this.element.outerWidth())+this.config.distance+"px",top:offset.top+parseInt(this.element.outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity})}else if("[object Array]"===Object.prototype.toString.call(this.config.position))offset=new d,a.stop().css({left:offset.left-parseInt(a.outerWidth())/2+"px",top:offset.top-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity});else switch(offset=c(this.config.position).position(),this.config.direction){case "up":a.stop().css({left:offset.left+parseInt(c(this.config.position).outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:offset.top-parseInt(a.outerHeight())-this.config.distance+"px",opacity:this.config.startOpacity});break;case "down":a.stop().css({left:offset.left+parseInt(c(this.config.position).outerWidth())/2-parseInt(a.outerWidth())/2+"px",top:offset.top+parseInt(c(this.config.position).outerHeight())+this.config.distance+"px",opacity:this.config.startOpacity});break;case "left":a.stop().css({left:offset.left-parseInt(a.outerWidth())-this.config.distance+"px",top:offset.top+parseInt(c(this.config.position).outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity});break;case "right":a.stop().css({left:offset.left+parseInt(c(this.config.position).outerWidth())+this.config.distance+"px",top:offset.top+parseInt(c(this.config.position).outerHeight())/2-parseInt(a.outerHeight())/2+"px",opacity:this.config.startOpacity})}};e.prototype.showTitle=function(a){var b=this;switch(this.config.direction){case "up":a.stop().animate({top:offset.top-parseInt(a.outerHeight())+"px",opacity:"show"},this.config.fadeIn,function(){b.element.trigger("afterShow.mkTitle")});break;case "down":a.stop().animate({top:offset.top+parseInt(this.element.outerHeight())+"px",opacity:"show"},this.config.fadeIn,function(){b.element.trigger("afterShow.mkTitle")});break;case "left":a.stop().animate({left:offset.left-parseInt(a.outerWidth())+"px",opacity:"show"},this.config.fadeIn,function(){b.element.trigger("afterShow.mkTitle")});break;case "right":a.stop().animate({left:offset.left+parseInt(this.element.outerWidth())+"px",opacity:"show"},this.config.fadeIn,function(){b.element.trigger("afterShow.mkTitle")})}};e.prototype.hideTitle=function(a){var b=this;switch(this.config.direction){case "up":a.stop().animate({top:a.offset().top-this.config.distance+"px",opacity:"hide"},this.config.fadeOut,function(){b.element.trigger("callback.mkTitle")});break;case "down":a.stop().animate({top:a.offset().top+this.config.distance+"px",opacity:"hide"},this.config.fadeOut,function(){b.element.trigger("callback.mkTitle")});break;case "left":a.stop().animate({left:a.offset().left-this.config.distance+"px",opacity:"hide"},this.config.fadeOut,function(){b.element.trigger("callback.mkTitle")});break;case "right":a.stop().animate({left:a.offset().left+this.config.distance+"px",opacity:"hide"},this.config.fadeOut,function(){b.element.trigger("callback.mkTitle")})}};e.prototype.init=function(){var a=this;a.element.trigger("before.mkTitle");var b,d,c="";this.config.shadow&&(c=" shadow");switch(this.config.direction){case "up":d="<table class='"+this.config.titleClass+" "+this.config.color+c+"'><tr><td class='"+this.config.contentClass+"'></td></tr><tr><td colspan='3' class='arrow_down'><div class='sprite'></div></td></tr></table>";break;case "down":d="<table class='"+this.config.titleClass+" "+this.config.color+c+"'><tr><td colspan='3' class='arrow_up'><div class='sprite'></div></td></tr><tr><td class='"+this.config.contentClass+"'></td></tr></table>";break;case "left":d="<table class='"+this.config.titleClass+" "+this.config.color+c+"'><tr><td class='"+this.config.contentClass+"'></td><td class='arrow_right'><div class='sprite'></div></td></tr></table>";break;case "right":d="<table class='"+this.config.titleClass+" "+this.config.color+c+"'><tr><td class='arrow_left'><div class='sprite'></div></td><td class='"+this.config.contentClass+"'></td></tr></table>"}this.config.arrow||(d="<table class='"+this.config.titleClass+" "+this.config.color+c+"'><tr><td class='"+this.config.contentClass+"'></td></tr></table>");b=this.element.next("."+this.config.titleClass).length?this.element.next("."+this.config.titleClass):this.element.after(d).next();if(this.config.remove)return a.element.trigger("remove.mkTitle"),this.hideTitle(b),this.element;b.find("."+this.config.contentClass).html(this.config.content);this.toPosition(b);this.showTitle(b);switch(this.config.hideOn){case "mouseLeave":this.element.mouseleave(function(){a.element.trigger("onMouseLeave.mkTitle");a.hideTitle(b)});break;case "clickTitle":b.one("click",function(c){c.stopPropagation();a.element.trigger("onClickTitle.mkTitle");a.hideTitle(b)});break;case "clickParent":a.element.one("click",function(){a.element.trigger("onClickParent.mkTitle");a.hideTitle(b)});break;case "mouseLeave_clickParent":a.element.one("click",function(){a.element.trigger("onClickParent.mkTitle");a.hideTitle(b)});this.element.mouseleave(function(){a.element.trigger("onMouseLeave.mkTitle");a.hideTitle(b)});break;case "timeout":b.one("click",function(){a.hideTitle(b);clearTimeout(j)}),j=setTimeout(function(){a.hideTitle(b)},this.config.timeout)}};c.fn[h]=function(a){return this.each(function(){new e(c(this),a)})}})(jQuery,window,document);
//ui-touch-punch
;(function(b){function c(a,c){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var b=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(d)}}b.support.touch="ontouchend"in document;if(b.support.touch){var d=b.ui.mouse.prototype,f=d._mouseInit,e;d._touchStart=function(a){!e&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,c(a,"mouseover"),c(a,"mousemove"),c(a,"mousedown"))};d._touchMove=function(a){e&&(this._touchMoved=!0,c(a,"mousemove"))};d._touchEnd=function(a){e&&(c(a,"mouseup"),c(a,"mouseout"),this._touchMoved||c(a,"click"),e=!1)};d._mouseInit=function(){this.element.bind("touchstart",b.proxy(this,"_touchStart")).bind("touchmove",b.proxy(this,"_touchMove")).bind("touchend",b.proxy(this,"_touchEnd"));f.call(this)}}})(jQuery);
//jquery.mousewheel
;(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0,a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
//jQuery.ScrollTo - Easy element scrolling using jQuery. Ariel Flesler
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,targ,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
//mk360 
;(function(h){function q(c,a,f){this.defaults={frame:[300,300],grid:[3,3],blankFrames:0,fps:25,sensitivity:10,autoRotation:!0,clickPicture:!0,fadeIn:500,containerClass:"mk360_container",button:!0,buttonClass:"mk360_button",buttonName:"start / stop"};this.count=f;this.element=c;this.metadata=this.element.data("mk360");this.options=a;this.config=h.extend({},this.defaults,this.options,this.metadata);h.each(this.config,function(b,a){if("function"==typeof a)c.on(b+".mk360",a)});var d=this.element,b=this.config;d.trigger("onStart.mk360");var l,e,a=b.frame[0];l=b.frame[1];var j=a*b.grid[0],k=l*b.grid[1],g=!1;d.wrap(h("<div/>",{"class":b.containerClass})).wrap(h("<div/>",{"class":"mk360_window",width:a,height:l})).wrap(h("<div/>",{"class":"mk360_sprite",width:j,height:k}));a=d.closest("."+b.containerClass);e=d.closest(".mk360_window");l=d.closest(".mk360_sprite");if(b.button)h("<button/>",{"class":b.buttonClass,text:b.buttonName}).appendTo(a).on("click",function(){m(e,b,f);return!1});j=/(opera mini)/;k=navigator.userAgent.toLowerCase();if("undefined"!=typeof window.ontouchstart||k.match(j))h("."+b.containerClass).draggable({cancel:"."+b.containerClass}),d.trigger("isTouch.mk360");navigator.userAgent.toLowerCase().match(/(opera mini)/)?d.trigger("isOperaMini.mk360"):e.bind("mousewheel",function(a,c,g,h){d.trigger("onMousewheel.mk360");e.hasClass("active")&&m(e,b,f);0<g?(start_position=parseInt(a.pageX),i(e,b,"right")):0>g&&(start_position=parseInt(a.pageX),i(e,b,"left"));0<h?(start_position=parseInt(a.pageX),i(e,b,"left")):0>h&&(start_position=parseInt(a.pageX),i(e,b,"right"));return!1});a.mousedown(function(a){d.trigger("onMousedown.mk360");g=!0;start_position=parseInt(a.pageX);return!1}).mouseup(function(){d.trigger("onMouseup.mk360");g=!1}).mouseleave(function(){d.trigger("onMouseleave.mk360");g=!1});if(b.clickPicture)l.on("click",function(){d.trigger("onClickPicture.mk360");m(e,b,f);return!1});a.bind("mousemove",function(a){g&&(d.trigger("onDrag.mk360"),e.hasClass("active")&&m(e,b,f),parseInt(a.pageX)-start_position>b.sensitivity&&(start_position=parseInt(a.pageX),i(e,b,"right")),parseInt(a.pageX)-start_position<-b.sensitivity&&(start_position=parseInt(a.pageX),i(e,b,"left")));return!1});d.bind("load.mk360",function(){d.trigger("onLoad.mk360");b.autoRotation&&m(e,b,f)});d.is(":hidden")&&d.fadeIn(b.fadeIn)}function p(c,a){this.update(c,a)}function m(c,a,f){obj=h(".mk360",c);n[f]?((a=n[f])&&a.stop(),c.toggleClass("active"),delete n[f]):(obj.trigger("onAutorotate.mk360"),a=new p(c,a),n[f]=a,c.toggleClass("active"))}function i(c,a,f){element=h(".mk360",c);element.trigger("onFramechange.mk360");var c=h(".mk360_sprite",c),f=f?f:"right",d=a.frame[0],b=a.frame[1],l=a.blankFrames,e=d*a.grid[0],a=b*a.grid[1],j=parseInt(c.css("left").slice(0,-2)),k=parseInt(c.css("top").slice(0,-2)),g=0,i=0;l&&(g=l*d,g>e?(i=Math.floor(g/e),g-=e*i,i*=b):g==e&&(g=0,i=b));"right"==f?j==-1*(e-d-g)&&k==-1*(a-b-i)?c.css({left:"0px",top:"0px"}):j!==-1*(e-d)?c.css("left",j-d+"px"):k!==-1*(a-b)&&c.css({left:"0px",top:k-b+"px"}):"left"==f&&(0!==j?c.css("left",j+d+"px"):"0"!==j&&"0"==k?c.css({left:-1*(e-d-g),top:-1*(a-b-i)}):c.css({left:-1*(e-d),top:k+b}))}p.prototype.stop=function(){clearTimeout(this.timerKey)};var r=1;p.prototype.update=function(c,a){r++;i(c.closest(h(".mk360_window")),a);var f=this;this.timerKey=setTimeout(function(){f.update(c,a)},1E3/a.fps)};var n=[];h.fn.mk360=function(c){return this.each(function(a){new q(h(this),c,a)})}})(jQuery);
//maskedinput
(function(b){var v=(b.browser.msie?"paste":"input")+".mask",w=void 0!=window.orientation;b.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};b.fn.extend({caret:function(d,g){if(0!=this.length){if("number"==typeof d)return g="number"==typeof g?g:d,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(d,g);else if(this.createTextRange){var h=this.createTextRange();h.collapse(!0);h.moveEnd("character",g);h.moveStart("character",d);h.select()}});if(this[0].setSelectionRange)d=this[0].selectionStart,g=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var b=document.selection.createRange();d=0-b.duplicate().moveStart("character",-1E5);g=d+b.text.length}return{begin:d,end:g}}},unmask:function(){return this.trigger("unmask")},mask:function(d,g){if(!d&&0<this.length)return b(this[0]).data(b.mask.dataName)();g=b.extend({placeholder:"_",completed:null},g);var r=b.mask.definitions,h=[],m=d.length,p=null,l=d.length;b.each(d.split(""),function(g,b){"?"==b?(l--,m=g):r[b]?(h.push(RegExp(r[b])),null==p&&(p=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function j(a){for(;++a<=l&&!h[a];);return a}function u(a,f){if(!(0>a)){for(var c=a,b=j(f);c<l;c++)if(h[c]){if(b<l&&h[c].test(k[b]))k[c]=k[b],k[b]=g.placeholder;else break;b=j(b)}q();e.caret(Math.max(p,a))}}function x(a){a=a.which;if(8==a||46==a||w&&127==a){var f=e.caret(),c=f.begin,f=f.end;if(0==f-c){if(46!=a)for(;0<=--c&&!h[c];);else c=f=j(c-1);f=46==a?j(f):f}s(c,f);u(c,f-1);return!1}if(27==a)return e.val(t),e.caret(0,n()),!1}function y(a){var f=a.which,c=e.caret();if(a.ctrlKey||a.altKey||a.metaKey||32>f)return!0;if(f){0!=c.end-c.begin&&(s(c.begin,c.end),u(c.begin,c.end-1));a=j(c.begin-1);if(a<l&&(f=String.fromCharCode(f),h[a].test(f))){for(var c=a,b=g.placeholder;c<l;c++)if(h[c]){var d=j(c),m=k[c];k[c]=b;if(d<l&&h[d].test(m))b=m;else break}k[a]=f;q();a=j(a);e.caret(a);g.completed&&a>=l&&g.completed.call(e)}return!1}}function s(a,b){for(var c=a;c<b&&c<l;c++)h[c]&&(k[c]=g.placeholder)}function q(){return e.val(k.join("")).val()}function n(a){for(var b=e.val(),c=-1,d=0,j=0;d<l;d++)if(h[d]){for(k[d]=g.placeholder;j++<b.length;){var n=b.charAt(j-1);if(h[d].test(n)){k[d]=n;c=d;break}}if(j>b.length)break}else k[d]==b.charAt(j)&&d!=m&&(j++,c=d);if(!a&&c+1<m)e.val(""),s(0,l);else if(a||c+1>=m)q(),a||e.val(e.val().substring(0,c+1));return m?d:p}var e=b(this),k=b.map(d.split(""),function(a){if("?"!=a)return r[a]?g.placeholder:a}),t=e.val();e.data(b.mask.dataName,function(){return b.map(k,function(a,b){return h[b]&&a!=g.placeholder?a:null}).join("")});e.attr("readonly")||e.one("unmask",function(){e.unbind(".mask").removeData(b.mask.dataName)}).bind("focus.mask",function(){t=e.val();var a=n();q();var f=function(){a==d.length?e.caret(0,a):e.caret(a)};(b.browser.msie?f:function(){setTimeout(f,25)})()}).bind("blur.mask",function(){n();e.val()!=t&&e.change()}).bind("keydown.mask",x).bind("keypress.mask",y).bind(v,function(){setTimeout(function(){e.caret(n(!0))},0)});n()})}})})(jQuery);






